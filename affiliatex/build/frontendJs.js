var affiliatexExports;!function(t){const e={init(){t(document).ready(function(){document.body.classList.contains("block-editor-page")||(e.handleReadMoreClick(),e.initReadMore())}),this.initElementorPreview()},initElementorPreview(){t(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&(e.handleReadMoreClick(),elementorFrontend.hooks&&elementorFrontend.hooks.addAction("frontend/element_ready/affiliatex-single-product.default",function(n){n.find(".affx-readmore").each(function(){const n=t(this);n.data("truncated",!1),e.truncateElement(n)})}))})},initReadMore(){t(".affx-readmore").each(function(){const n=t(this);n.data("truncated")||e.truncateElement(n)})},truncateElement(t){const n=parseInt(t.data("char-limit"))||0,a=parseInt(t.data("item-limit"))||0,i=t.find(".affx-readmore-btn");if(!n&&!a)return t.removeClass("affx-readmore"),void i.hide();let r=!1;if("list"===t.data("content-type")){const o=t.find("ul, ol").first();if(!o.length||0===o.children("li").length)return void i.hide();r=e.truncateList(t,a,n)}else r=e.truncateParagraph(t,n);r?(t.data("truncated",!0),t.data("expanded",!1)):(t.removeClass("affx-readmore"),i.hide())},truncateParagraph(t,e){const n=t.find(".affiliatex-content");if(!n.length)return!1;const a=n.text();if(a.length<=e)return!1;const i=a.substring(0,e)+"...";return t.data("full-content",a),n.text(i),!0},truncateList(e,n,a){const i=e.html(),r=t("<div>").html(i);r.find(".affx-readmore-btn").remove(),e.data("original-content",r.html());const o=e.find("ul, ol").first();if(!o.length)return!1;const d=o.children("li");let l=!1;n&&d.length>n&&(d.slice(n).remove(),l=!0),a&&e.find("li").each(function(){const e=t(this),n=e.find("span").first(),i=n.length?n:e,r=i.text();r.length>a&&(i.text(r.substring(0,a)+"..."),l=!0)});const f=e.html(),c=t("<div>").html(f);return c.find(".affx-readmore-btn").remove(),e.data("trimmed-content",c.html()),l},handleReadMoreClick(){t(document).off("click",".affx-readmore-btn").on("click",".affx-readmore-btn",function(e){e.stopPropagation();const n=t(this),a=n.closest(".affx-readmore"),i=a.data("expanded")||!1,r=a.data("content-type"),o=n.data("readmore-text"),d=n.data("readless-text");if("list"===r){const t=a.data("original-content"),e=a.data("trimmed-content");!i&&t?(a.html(t),a.append(n),n.text(d)):e&&(a.html(e),a.append(n),n.text(o))}else{const t=a.find(".affiliatex-content"),e=a.data("full-content"),r=parseInt(a.data("char-limit"))||0;!i&&e?(t.text(e),n.text(d)):e&&(t.text(e.substring(0,r)+"..."),n.text(o))}a.data("expanded",!i)})}};e.init()}(jQuery),(affiliatexExports=void 0===affiliatexExports?{}:affiliatexExports).frontendJs={};