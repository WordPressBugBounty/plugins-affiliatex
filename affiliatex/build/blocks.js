var affiliatexExports;(()=>{"use strict";const e=window.React,t=window.wp.richText,a=window.wp.blockEditor,i=window.wp.data,{Toolbar:n,IconButton:l}=wp.components;(0,t.registerFormatType)("affiliatex/tick-icon",{title:"Tick",tagName:"tick",className:null,edit:function(r){const c=(0,i.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]);return c&&"affiliatex/versus-line"!==c.name&&c&&"affiliatex/versus"!==c.name&&c&&"affiliatex/product-comparison"!==c.name?null:(0,e.createElement)(a.BlockControls,null,(0,e.createElement)(n,null,(0,e.createElement)(l,{icon:"yes",title:"Tick",onClick:()=>{let e=(0,t.create)({html:'<i class="fas fa-check" aria-hidden="true"> </i>'});r.onChange((0,t.insert)(r.value,e))},isActive:r.isActive})))}}),(0,t.registerFormatType)("affiliatex/check-icon",{title:"Check",tagName:"check",className:null,edit:function(r){const c=(0,i.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]);return c&&"affiliatex/versus-line"!==c.name&&c&&"affiliatex/versus"!==c.name&&c&&"affiliatex/product-comparison"!==c.name?null:(0,e.createElement)(a.BlockControls,null,(0,e.createElement)(n,null,(0,e.createElement)(l,{icon:"yes-alt",title:"Check",onClick:()=>{let e=(0,t.create)({html:'<i class="fas fa-check-circle" aria-hidden="true"> </i>'});r.onChange((0,t.insert)(r.value,e))},isActive:r.isActive})))}}),(0,t.registerFormatType)("affiliatex/wrong-icon",{title:"Wrong",tagName:"wrong",className:null,edit:function(r){const c=(0,i.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]);return c&&"affiliatex/versus-line"!==c.name&&c&&"affiliatex/versus"!==c.name&&c&&"affiliatex/product-comparison"!==c.name?null:(0,e.createElement)(a.BlockControls,null,(0,e.createElement)(n,null,(0,e.createElement)(l,{icon:"no-alt",title:"Wrong",onClick:()=>{let e=(0,t.create)({html:'<i class="fas fa-times" aria-hidden="true"> </i>'});r.onChange((0,t.insert)(r.value,e))},isActive:r.isActive})))}}),(0,t.registerFormatType)("affiliatex/cross-icon",{title:"Cross",tagName:"cross",className:null,edit:function(r){const c=(0,i.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]);return c&&"affiliatex/versus-line"!==c.name&&c&&"affiliatex/versus"!==c.name&&c&&"affiliatex/product-comparison"!==c.name?null:(0,e.createElement)(a.BlockControls,null,(0,e.createElement)(n,null,(0,e.createElement)(l,{icon:"dismiss",title:"Cross",onClick:()=>{let e=(0,t.create)({html:'<i class="fas fa-times-circle" aria-hidden="true"> </i>'});r.onChange((0,t.insert)(r.value,e))},isActive:r.isActive})))}});const r=window.wp.i18n,c=window.wp.components,o=()=>(0,e.createElement)("svg",{className:"affx-amazon-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M12.4848 8.63544C11.4449 8.72448 10.4057 8.82624 9.40033 9.12672C7.33801 9.74448 6.28537 11.1396 6.31921 13.1993C6.34993 15.0554 7.42345 16.2869 9.26761 16.4834C10.4563 16.6099 11.5975 16.4131 12.5623 15.6233C12.8386 15.3974 13.0975 15.1502 13.3421 14.9333C13.7417 15.3744 14.1171 15.8131 14.5195 16.2262C14.7747 16.4878 15.0207 16.4774 15.295 16.2425C15.8095 15.8028 16.321 15.3593 16.8327 14.916C17.1091 14.676 17.1451 14.4626 16.897 14.1818C16.29 13.4938 16.08 12.7034 16.0961 11.7926C16.1244 10.1698 16.1115 8.54645 16.0575 6.92424C16.0164 5.67696 15.3931 4.7484 14.2445 4.24008C12.4805 3.46008 10.693 3.47736 8.93401 4.25232C7.74625 4.77648 7.01953 5.71056 6.73561 6.9828C6.64249 7.40088 6.75385 7.55688 7.17481 7.60728C7.78177 7.68 8.38801 7.75776 8.99425 7.83696C9.32857 7.88064 9.51457 7.78032 9.58705 7.44552C9.80281 6.44856 10.7883 5.95536 11.7226 6.09408C12.3257 6.1836 12.7755 6.5652 12.8676 7.14312C12.9425 7.61328 12.937 8.09664 12.9667 8.56896C12.8873 8.59056 12.8573 8.60376 12.8261 8.6064C12.7123 8.61768 12.5986 8.6256 12.4848 8.63544ZM12.4404 13.3807C12.1375 13.8382 11.7495 14.1682 11.2032 14.2601C10.3181 14.4086 9.66697 13.8391 9.60193 12.883C9.51673 11.6309 10.1561 10.7731 11.3921 10.5355C11.8906 10.4395 12.4032 10.4165 12.9334 10.3574C12.9384 11.4386 13.0469 12.4639 12.4404 13.3807Z",fill:"black"}),(0,e.createElement)("path",{d:"M18.0912 17.0141C18.0055 17.0395 17.9237 17.077 17.8411 17.112C16.6618 17.615 15.4493 18.0115 14.19 18.2599C13.001 18.4949 11.8039 18.6134 10.5924 18.5014C9.1032 18.3646 7.71408 17.8855 6.38592 17.2236C5.54064 16.8026 4.71504 16.3423 3.87864 15.9031C3.61632 15.7654 3.37584 15.8062 3.2412 15.997C3.10824 16.1849 3.15432 16.4323 3.38904 16.6171C4.22136 17.2721 5.03184 17.9597 5.90376 18.5578C7.52928 19.6726 9.32136 20.3381 11.6592 20.3371C13.5586 20.2894 15.6475 19.7105 17.5812 18.5854C17.9254 18.3852 18.2551 18.157 18.5767 17.9215C18.8218 17.742 18.8743 17.478 18.749 17.2522C18.6281 17.0338 18.3602 16.9344 18.0912 17.0141Z",fill:"#FF9900"}),(0,e.createElement)("path",{d:"M19.8876 15.1747C18.9684 15.0818 18.0806 15.1934 17.3049 15.761C17.1247 15.8923 17.0203 16.0699 17.1187 16.2898C17.2125 16.4993 17.4043 16.5264 17.6172 16.4964C18.0199 16.4398 18.4243 16.3937 18.8282 16.343L18.8311 16.3745C18.978 16.3745 19.1246 16.3726 19.271 16.375C19.4407 16.3778 19.5312 16.4518 19.4921 16.6342C19.4491 16.8329 19.4201 17.0359 19.3601 17.2291C19.2446 17.6023 19.0953 17.9654 18.9955 18.342C18.9641 18.4606 19.0029 18.6598 19.0869 18.731C19.1827 18.8117 19.3689 18.823 19.5079 18.8042C19.6058 18.7915 19.7013 18.6898 19.7791 18.6096C20.3988 17.9683 20.7146 17.1833 20.8087 16.3114C20.9011 15.4546 20.7492 15.2618 19.8876 15.1747Z",fill:"#FF9900"})),s=()=>(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"affx-lock-icon",width:"10",height:"10",viewBox:"0 0 26 26"},(0,e.createElement)("g",{fill:"#0034ff",fillRule:"nonzero"},(0,e.createElement)("path",{d:"M16,0c-2.21094,0 -4.12109,0.91797 -5.3125,2.40625c-1.19141,1.48828 -1.6875,3.41797 -1.6875,5.5v1.09375h3v-1.09375c0,-1.57812 0.39063,-2.82031 1.03125,-3.625c0.64063,-0.80469 1.51172,-1.28125 2.96875,-1.28125c1.46094,0 2.32813,0.44922 2.96875,1.25c0.64063,0.80078 1.03125,2.05859 1.03125,3.65625v1.09375h3v-1.09375c0,-2.09375 -0.52734,-4.04297 -1.71875,-5.53125c-1.19141,-1.48828 -3.07422,-2.375 -5.28125,-2.375zM9,10c-1.65625,0 -3,1.34375 -3,3v10c0,1.65625 1.34375,3 3,3h14c1.65625,0 3,-1.34375 3,-3v-10c0,-1.65625 -1.34375,-3 -3,-3zM16,15c1.10547,0 2,0.89453 2,2c0,0.73828 -0.40234,1.37109 -1,1.71875v2.28125c0,0.55078 -0.44922,1 -1,1c-0.55078,0 -1,-0.44922 -1,-1v-2.28125c-0.59766,-0.34766 -1,-0.98047 -1,-1.71875c0,-1.10547 0.89453,-2 2,-2z"}))),d=()=>(0,e.createElement)("svg",{className:"affx-swap-icon",width:"10",height:"10",viewBox:"0 0 448 512"},(0,e.createElement)("path",{fill:"#0034ff",d:"M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"})),u=(window.wp.apiFetch,window.wp.element,e=>{if(!e)return!1;const t="object"==typeof e&&e.hasOwnProperty("text")?e.text:e;return"string"==typeof t&&/^\[affiliatex-product(\s+(?:id|field|type)=[^\]]+)*\]$/.test(t.trim())}),m=({onClick:t,className:n="",isToolbarButton:l=!1,type:m,setAttributes:f,field:p,value:C})=>{const{name:E}=(0,a.useBlockEditContext)(),g=E.startsWith("affiliatex/"),A=l&&g?c.ToolbarButton:c.Button,x=window.AffiliateX&&"true"===window.AffiliateX.proActive,{setActiveModal:T,setUpgradeModal:h,setAmazonFieldType:v,setCurrentAttributesField:w}=(0,i.useDispatch)("affiliatex"),b=C&&u(C.toString()),_=(0,e.createElement)(A,{label:b?(0,r.__)("Change Amazon Product","affiliatex"):(0,r.__)("Link Amazon Product","affiliatex"),onClick:()=>{t&&t(),T(x?"amazon-modal":"upgrade-modal"),v(null!=m?m:"text"),p&&w(p),x||h({modalType:"amazon",modalTitle:(0,r.__)("Amazon Integration","affiliatex"),blockTitle:(0,r.__)("Amazon Integration","affiliatex")})},className:`affx-amazon-button ${b?"is-connected":""} ${n}`.trim()},x?(0,e.createElement)(e.Fragment,null,b&&(0,e.createElement)(d,null),(0,e.createElement)(o,null)):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s,null),(0,e.createElement)(o,null)));return l&&g?(0,e.createElement)(a.BlockControls,null,_):_},f=e=>{if("string"==typeof e)return e;if(e.parent){const{parent:t,name:a,index:i}=e;return`${t}.${void 0!==i?i:""}.${a}`}return e?.name};let p=!1;const C={activeModal:"",amazonFieldType:"text",upgradeModal:{blockTitle:"",demoSlug:""},currentAttributesField:"",connectedProduct:null,isProductSidebarOpen:!1},E=(0,i.createReduxStore)("affiliatex",{reducer(e=C,t){switch(t.type){case"SET_ACTIVE_MODAL":return{...e,activeModal:t.activeModal};case"SET_UPGRADE_MODAL":return{...e,upgradeModal:{...e.upgradeModal,...t.upgradeModal}};case"SET_AMAZON_FIELD_TYPE":return{...e,amazonFieldType:t.amazonFieldType};case"SET_CURRENT_ATTRIBUTES_FIELD":return{...e,currentAttributesField:t.field};case"SET_CONNECTED_PRODUCT":return{...e,connectedProduct:t.product};case"SET_PRODUCT_SIDEBAR_OPEN":return{...e,isProductSidebarOpen:t.isOpen};case"RESET_AMAZON_STATE":return{...e,connectedProduct:null,isProductSidebarOpen:!1}}return e},actions:{setActiveModal:e=>({type:"SET_ACTIVE_MODAL",activeModal:e}),setUpgradeModal:e=>({type:"SET_UPGRADE_MODAL",upgradeModal:e}),setAmazonFieldType:e=>({type:"SET_AMAZON_FIELD_TYPE",amazonFieldType:e}),setCurrentAttributesField:e=>({type:"SET_CURRENT_ATTRIBUTES_FIELD",field:e}),setConnectedProduct:e=>({type:"SET_CONNECTED_PRODUCT",product:e}),setProductSidebarOpen:e=>({type:"SET_PRODUCT_SIDEBAR_OPEN",isOpen:e}),resetAmazonState:()=>({type:"RESET_AMAZON_STATE"})},selectors:{getActiveModal(e){const{activeModal:t}=e;return t},getUpgradeModal(e){const{upgradeModal:t}=e;return t},getAmazonFieldType(e){const{amazonFieldType:t}=e;return t},getCurrentAttributes:e=>e.currentAttributes,getCurrentAttributesField:e=>e.currentAttributesField,getConnectedProduct:e=>e.connectedProduct,isProductSidebarOpen:e=>e.isProductSidebarOpen}}),g=AffiliateX.customizationData;if("custom"===g.editorWidth){let e=document.createElement("style");e.innerHTML=`\n\t#editor .editor-styles-wrapper .wp-block{\n\tmax-width: ${g.editorCustomWidth}px\n\t}\n`,document.head.appendChild(e)}if("custom"===g.editorSidebarWidth){let e=document.createElement("style");e.innerHTML=`\n\t#editor .is-sidebar-opened .interface-interface-skeleton__sidebar, #editor .is-sidebar-opened .interface-complementary-area{\n\twidth: ${g.editorCustomSidebarWidth}px\n\t}\n`,document.head.appendChild(e)}(()=>{if(!p)try{(0,t.registerFormatType)("affiliatex/amazon-product",{title:(0,r.__)("Amazon Product List","affiliatex"),tagName:"span",className:"affx-amazon-toolbar-btn",edit:({isActive:t,value:a,onChange:n})=>{const l=(0,i.useSelect)((e=>e("core/block-editor").getSelectedBlock())),r=(0,i.useSelect)((e=>e("affiliatex").getCurrentAttributesField()));let c=!0===r?.nested?l?.attributes?.[r.parent]?.[r.index]?.[r.name]:l?.attributes?.[r.name];return Array.isArray(c)&&1===c.length&&c[0]?.list&&u(c[0]?.list)&&(c=c[0]?.list),l&&l.name.startsWith("affiliatex/")&&!(e=>{const t=e?.attributes?.excludeAmazonFields||[];return((e,t)=>{const a=f(e);return t.some((e=>(e=>{const t=e.replace(/\./g,"\\.").replace(/\*/g,".*");return new RegExp(`^${t}$`)})(f(e)).test(a)))})((0,i.useSelect)((e=>e("affiliatex").getCurrentAttributesField())),t)})(l)?(0,e.createElement)(m,{className:"affx-amazon-toolbar-btn",isToolbarButton:!0,setAttributes:l.setAttributes,field:r,value:c,type:"text"}):null}}),p=!0}catch(e){console.error("Failed to register Amazon format:",e)}})(),(0,i.register)(E),(affiliatexExports=void 0===affiliatexExports?{}:affiliatexExports).blocks={}})();